<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Background Test</title>
  <link rel="stylesheet" href="/video-bg.css">
  <style>
    body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
    .test-container { 
      position: relative; 
      z-index: 20; 
      background: rgba(255,255,255,0.95); 
      padding: 20px; 
      border-radius: 8px; 
      max-width: 800px; 
      margin: 0 auto;
    }
    h1 { color: #333; }
    .status { 
      padding: 10px; 
      margin: 10px 0; 
      border-radius: 4px; 
      font-weight: bold; 
    }
    .status.ok { background: #d4edda; color: #155724; }
    .status.error { background: #f8d7da; color: #721c24; }
    .status.info { background: #d1ecf1; color: #0c5460; }
    .info-box {
      background: #f8f9fa;
      padding: 10px;
      margin: 10px 0;
      border-left: 4px solid #007bff;
      border-radius: 4px;
    }
    video { 
      max-width: 100%;
      margin: 20px 0;
      border: 2px solid #007bff;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen video-bg-active">
  <div class="test-container">
    <h1>ðŸŽ¬ Video Background Test Page</h1>
    
    <div id="test-results"></div>
    
    <h2>Direct Video Test</h2>
    <p>Below is a direct video element (not injected):</p>
    <video width="100%" controls autoplay muted loop>
      <source src="/frontend/assets/background.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    
    <h2>Debug Information</h2>
    <div id="debug-info" class="info-box"></div>
  </div>

  <script>
    const resultsDiv = document.getElementById('test-results');
    const debugDiv = document.getElementById('debug-info');
    
    function log(status, message, details = '') {
      const statusClass = status === 'ok' ? 'ok' : status === 'error' ? 'error' : 'info';
      const div = document.createElement('div');
      div.className = `status ${statusClass}`;
      div.textContent = message;
      if (details) {
        div.innerHTML += `<br><small>${details}</small>`;
      }
      resultsDiv.appendChild(div);
    }

    // Test 1: Check if video file is accessible
    fetch('/frontend/assets/background.mp4', { method: 'HEAD' })
      .then(res => {
        if (res.ok) {
          log('ok', 'âœ… Video file is accessible', `Content-Type: ${res.headers.get('content-type')}`);
        } else {
          log('error', 'âŒ Video file returned status: ' + res.status);
        }
      })
      .catch(err => {
        log('error', 'âŒ Cannot reach video file', err.message);
      });

    // Test 2: Check DOM readiness
    log('info', `ðŸ“„ DOM Ready State: ${document.readyState}`);

    // Test 3: Check if video container exists
    setTimeout(() => {
      const container = document.getElementById('site-bg-video');
      if (container) {
        const video = container.querySelector('video');
        const rect = container.getBoundingClientRect();
        log('ok', 'âœ… Video container found in DOM', `Position: ${rect.width}x${rect.height}`);
        
        if (video) {
          log('ok', 'âœ… Video element found', `Muted: ${video.muted}, Loop: ${video.loop}, Autoplay: ${video.autoplay}`);
          
          video.addEventListener('play', () => {
            log('ok', 'âœ… Video is playing!');
          });
          
          video.addEventListener('pause', () => {
            log('info', 'â¸ï¸ Video paused');
          });
        } else {
          log('error', 'âŒ Video element not found in container');
        }
      } else {
        log('error', 'âŒ Video container not found - script may not have run');
      }
    }, 1000);

    // Test 4: Check body classes
    const bodyClasses = document.body.className;
    log('info', `ðŸ“‹ Body Classes: ${bodyClasses || '(none)'}`);

    // Test 5: Check computed styles
    setTimeout(() => {
      const container = document.getElementById('site-bg-video');
      if (container) {
        const styles = window.getComputedStyle(container);
        debugDiv.innerHTML = `
          <strong>Container Computed Styles:</strong><br>
          position: ${styles.position}<br>
          z-index: ${styles.zIndex}<br>
          width: ${styles.width}<br>
          height: ${styles.height}<br>
          display: ${styles.display}<br>
          visibility: ${styles.visibility}
        `;
      }
    }, 1000);
  </script>

  <script src="/video-bg.js"></script>
</body>
</html>
